<!-- navbar.html -->
<div class="navbar">
    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo" class="logo">

    <div class="nav-links">
        <a href="{{ url_for('teacher.courses') }}">Courses</a>
        <a href="{{ url_for('teacher.attendance') }}">Attendance</a>
        <a href="{{ url_for('teacher.feedback') }}">Feedback</a>
        <a href="{{ url_for('teacher.export') }}">Export</a>
    </div>

    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð´Ð»Ñ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹ -->
    <button class="notification-btn" onclick="openNotifications()">ðŸ”” Notifications</button>

    <!-- ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ -->
    <div class="user-profile">
        <img src="{{ current_user.profile_picture or url_for('static', filename='images/default-avatar.jpg') }}"
             alt="Profile Picture" class="navbar-profile-picture">
        <a href="{{ url_for('teacher.profile') }}">ðŸ‘¤ Profile</a>
    </div>

</div>

<!-- Ð’ÑÐ¿Ð»Ñ‹Ð²Ð°ÑŽÑ‰ÐµÐµ Ð¾ÐºÐ½Ð¾ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹ -->
<div class="notifications-popup" id="notificationsPopup" style="display: none;">
    <div class="notifications-header">
        <h2>Notifications</h2>
        <button onclick="closeNotifications()">Close</button>
    </div>
    <div class="notifications-list">
        <ul id="notificationsList">
            <!-- Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð´Ð³Ñ€ÑƒÐ¶Ð°ÑŽÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· JS -->
        </ul>
    </div>
    <div class="notifications-footer">
        <a href="{{ url_for('teacher.all_notifications') }}">See All</a>
    </div>
</div>

<script>
    function openNotifications() {
        fetch('/teacher/notifications/get')
            .then(response => response.json())
            .then(data => {
                const notificationsList = document.getElementById('notificationsList');
                notificationsList.innerHTML = '';
                data.forEach(notification => {
                    const listItem = document.createElement('li');
                    listItem.innerHTML = `
                        <p>${notification.message}</p>
                        ${notification.link ? `<a href="${notification.link}">View</a>` : ''}
                        <small>${notification.date_time}</small>
                    `;
                    notificationsList.appendChild(listItem);
                });
                document.getElementById('notificationsPopup').style.display = 'block';
            });
    }

    function closeNotifications() {
        document.getElementById('notificationsPopup').style.display = 'none';
    }
</script>
